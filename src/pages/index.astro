---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getArticles, getBrands, getCategories, getSiteInfo } from '../utils/data';

const site = getSiteInfo();
const categories = getCategories();
const brands = getBrands();
const articles = getArticles();
const url = 'https://opinioneselectronicas.com/';

const heroSignals = [
  { label: 'Puntuaci√≥n media', value: '4,8/5', detail: 'Basada en pruebas reales y hojas de medici√≥n propias.' },
  { label: 'Opiniones verificadas', value: '280+', detail: 'Usuarios que usan a diario nuestros rankings.' },
  { label: 'A√±os vendiendo hardware', value: '20', detail: 'Experiencia de mostrador + laboratorio casero.' }
];

const scoreSteps = [
  {
    title: 'Probamos como t√∫ lo usar√≠as',
    copy: 'Gaming, edici√≥n, clase online o teletrabajo. Medimos FPS, latencias, autonom√≠a y ruido con sensores y hojas p√∫blicas.',
    icon: 'üß™'
  },
  {
    title: 'Asignamos una nota clara',
    copy: 'Puntuaci√≥n sobre 5 con criterios de valor por euro, durabilidad, servicio t√©cnico y experiencia diaria.',
    icon: '‚≠ê'
  },
  {
    title: 'Opini√≥n real y honesta',
    copy: 'Sin notas infladas: contamos lo bueno, lo malo y para qui√©n sirve. Siempre con recomendaciones accionables.',
    icon: 'üí¨'
  }
];

const socialProof = [
  {
    name: 'Mar√≠a ¬∑ Dise√±adora UX',
    quote: 'Compr√© port√°til siguiendo la puntuaci√≥n de ergonom√≠a y acert√©: teclado y bater√≠a como promet√≠ais.',
    rating: '4.9'
  },
  {
    name: 'Rafa ¬∑ Streamer',
    quote: 'Las notas de ruido en las gr√°ficas fueron clavadas. Mi setup ahora es m√°s fresco y silencioso.',
    rating: '4.8'
  },
  {
    name: 'Luc√≠a ¬∑ Soporte IT',
    quote: 'Valoro que publiqu√©is la ficha de pruebas. Las puntuaciones se sienten ganadas, no marketing.',
    rating: '5.0'
  }
];

const highlightedArticles = [...articles]
  .sort((a, b) => b.puntuacion - a.puntuacion)
  .slice(0, 3);
const freshArticles = [...articles].slice(0, 3);

const webSiteSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: site.title,
  url,
  description: site.description,
  potentialAction: {
    '@type': 'SearchAction',
    target: `${url}busqueda?q={search_term_string}`,
    'query-input': 'required name=search_term_string'
  }
};
---
<BaseLayout title={`${site.title} | An√°lisis expertos de tecnolog√≠a`}
  description={site.description}
  url={url}
  image={site.defaultImage}
  keywords={[site.tagline]}
>
  <div class="container">
    <section class="hero">
      <div>
        <div class="badge">EEAT experto</div>
        <h1>Notas reales para comprar sin dudas.</h1>
        <p>Benchmark, term√≥metro y o√≠do afinado: damos una puntuaci√≥n justa y contamos la experiencia real tras d√≠as de uso.</p>
        <div class="flex hero-cta">
          <a class="button" href="/categoria/tarjetas-graficas">Ver comparativas top</a>
          <a class="button secondary" href="/busqueda">Buscar por nota</a>
        </div>
        <div class="signal-bar">
          {heroSignals.map((signal) => (
            <div class="signal-card">
              <p class="signal-value">{signal.value}</p>
              <p class="meta">{signal.label}</p>
              <small>{signal.detail}</small>
            </div>
          ))}
        </div>
      </div>
      <img src="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=1600&q=80" alt="Componentes de PC sobre un escritorio" />
    </section>

    <section class="score-section">
      <div class="section-title">
        <h2>C√≥mo ponemos la nota</h2>
        <a href="/busqueda">Ver fichas de prueba</a>
      </div>
      <div class="grid grid-3">
        {scoreSteps.map((step) => (
          <article class="card step-card" key={step.title}>
            <div class="step-icon" aria-hidden="true">{step.icon}</div>
            <div>
              <h3>{step.title}</h3>
              <p class="meta">{step.copy}</p>
            </div>
          </article>
        ))}
      </div>
    </section>

    <section>
      <div class="section-title">
        <h2>Categor√≠as en profundidad</h2>
        <a href="/busqueda">Ver todo</a>
      </div>
      <div class="grid grid-3">
        {categories.map((category) => (
          <article class="card" key={category.slug}>
            <img class="cover-image" src={category.heroImage} alt={`Imagen de ${category.nombre}`} loading="lazy" />
            <h3 style="margin:0.75rem 0 0.35rem;">{category.nombre}</h3>
            <p class="meta">{category.resumen}</p>
            <div class="tag-list"><span class="tag">Benchmarks</span><span class="tag">Gu√≠as</span><span class="tag">Consejos</span></div>
            <a class="button secondary" style="margin-top:0.85rem;" href={`/categoria/${category.slug}`}>Entrar</a>
          </article>
        ))}
      </div>
    </section>

    <section class="surface">
      <div class="section-title">
        <h2>Top puntuaciones de la semana</h2>
        <a href="/busqueda">Filtrar por nota</a>
      </div>
      <div class="grid grid-3">
        {highlightedArticles.map((article) => (
          <article class="card highlight" key={article.slug}>
            <div class="highlight-header">
              <span class="pill">{article.categoria}</span>
              <span class="score">{article.puntuacion.toFixed(1)}</span>
            </div>
            <h3>{article.titulo}</h3>
            <p class="meta">{article.extracto}</p>
            <div class="tag-list">
              <span class="tag">{article.marca}</span>
              <span class="tag">Actualizado {article.actualizado}</span>
            </div>
            <a class="button secondary" style="margin-top:0.85rem;" href={`/articulo/${article.slug}`}>Leer por qu√© tiene esa nota</a>
          </article>
        ))}
      </div>
    </section>

    <section>
      <div class="section-title">
        <h2>Top puntuaciones de la semana</h2>
        <a href="/busqueda">Filtrar por nota</a>
      </div>
      <div class="grid grid-3">
        {highlightedArticles.map((article) => (
          <article class="card highlight" key={article.slug}>
            <div class="highlight-header">
              <span class="pill">{article.categoria}</span>
              <span class="score">{article.puntuacion.toFixed(1)}</span>
            </div>
            <h3>{article.titulo}</h3>
            <p class="meta">{article.extracto}</p>
            <div class="tag-list">
              <span class="tag">{article.marca}</span>
              <span class="tag">Actualizado {article.actualizado}</span>
            </div>
            <a class="button secondary" style="margin-top:0.85rem;" href={`/articulo/${article.slug}`}>Leer por qu√© tiene esa nota</a>
          </article>
        ))}
      </div>
    </section>

    <section>
      <div class="section-title">
        <h2>Marcas que analizamos</h2>
        <a href="/busqueda">Ver todas</a>
      </div>
      <div class="grid grid-4">
        {brands.map((brand) => (
          <article class="card" key={brand.slug}>
            <div style="display:flex;align-items:center;gap:0.75rem;">
              <img src={brand.logo} alt={`Logo ${brand.nombre}`} style="max-width:120px;max-height:40px;object-fit:contain;" loading="lazy" />
              <span class="badge">{brand.nombre}</span>
            </div>
            <p class="meta" style="margin-top:0.5rem;">{brand.descripcion}</p>
            <a class="button secondary" href={`/marca/${brand.slug}`}>Ver gu√≠as</a>
          </article>
        ))}
      </div>
    </section>

    <section class="social-section">
      <div class="section-title">
        <h2>Opiniones reales de la comunidad</h2>
        <a href="/busqueda">√önete a las reviews</a>
      </div>
      <div class="grid grid-3">
        {socialProof.map((proof) => (
          <article class="card social-card" key={proof.name}>
            <div class="social-header">
              <div class="avatar" aria-hidden="true">{proof.name.charAt(0)}</div>
              <div>
                <strong>{proof.name}</strong>
                <p class="meta">Puntuaci√≥n enviada: {proof.rating}/5</p>
              </div>
            </div>
            <p>{proof.quote}</p>
          </article>
        ))}
      </div>
    </section>

    <section>
      <div class="section-title">
        <h2>√öltimos art√≠culos</h2>
        <a href="/busqueda">Todos los art√≠culos</a>
      </div>
      <div class="grid grid-3">
        {freshArticles.map((article) => (
          <article class="card" key={article.slug}>
            <img class="cover-image" src={article.heroImage} alt={article.titulo} loading="lazy" />
            <div class="meta" style="margin-top:0.5rem;">Actualizado {article.actualizado}</div>
            <h3 style="margin:0.5rem 0;">{article.titulo}</h3>
            <p class="meta">{article.extracto}</p>
            <div class="tag-list">
              <span class="tag">{article.categoria}</span>
              <span class="tag">{article.marca}</span>
              <span class="tag">Nota {article.puntuacion.toFixed(1)}</span>
            </div>
            <a class="button secondary" style="margin-top:0.85rem;" href={`/articulo/${article.slug}`}>Leer an√°lisis</a>
          </article>
        ))}
      </div>
    </section>
  </div>
  <script type="application/ld+json" set:html={JSON.stringify(webSiteSchema)}></script>
</BaseLayout>
